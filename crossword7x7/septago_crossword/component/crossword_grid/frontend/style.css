:root{
  --outer-border-px: 3px;
  --inner-border-px: 1px;
  --outer-border-color: #222;
  --inner-border-color: #666;
  --cell-size: 56px;
  --black: #000;
  --white: #fff;
  --active-slot: #DCEBFF;
  --active-outline-px: 3px;
}

html, body{
  margin:0;
  padding:0;
  background: transparent;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
}

#root{
  outline: none;
  display: block;
  width: 100%;
  box-sizing: border-box;
  padding: 0;
  user-select: none;
}

.loading{
  font-size: 13px;
  opacity: 0.75;
  padding: 10px;
}

.wrap{
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.top-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.timer{
  font-weight: 800;
  font-size: 20px;
  letter-spacing: 0.04em;
}

.reset{
  border: 1px solid rgba(0,0,0,0.25);
  border-radius: 10px;
  padding: 8px 12px;
  background: rgba(255,255,255,0.9);
  cursor: pointer;
  font-weight: 700;
}

.reset:hover{ filter: brightness(0.98); }

.main{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

@media (max-width: 900px){
  .main{ grid-template-columns: 1fr; }
}

.grid-col{
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: flex-start; /* ✅ prevents stretch; grid shrink-wraps */
}

.grid{
  display: grid;
  width: fit-content; /* ✅ removes extra bordered whitespace */
  border: var(--outer-border-px) solid var(--outer-border-color);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  background: transparent;
}

.cell{
  position: relative;
  display: flex;
  align-items:center;
  justify-content:center;
  font-weight: 800;
  font-size: 24px;
  letter-spacing: 0.02em;
  border-right: var(--inner-border-px) solid var(--inner-border-color);
  border-bottom: var(--inner-border-px) solid var(--inner-border-color);
  box-sizing: border-box;
}

.cell.last-col{ border-right: none; }
.cell.last-row{ border-bottom: none; }

.cell.black{ background: var(--black); }
.cell.playable{ background: var(--white); cursor: pointer; }
.cell.playable.active-slot{ background: var(--active-slot); }

/* Check marks */
.cell.playable.mark-correct{ background: rgba(223,246,221,0.9); }
.cell.playable.mark-wrong{ background: rgba(255,220,220,0.9); }

/* If a marked cell is also the active slot, keep the "active" tint readable */
.cell.playable.active-slot.mark-correct{ background: rgba(210,242,208,0.95); }
.cell.playable.active-slot.mark-wrong{ background: rgba(255,205,205,0.95); }

.cell.playable.active-cell::after{
  content:"";
  position:absolute;
  inset: 3px;
  border: var(--active-outline-px) solid rgba(0,0,0,0.75);
  border-radius: 8px;
  pointer-events:none;
}

/* Unified strip system for both intersection pool and hidden bars */
.strip{
  display: flex;
  gap: 6px;
  flex-wrap: nowrap;          /* prevent wrapping */
  padding: 8px 0 0 0;
}

/* Tile size is driven by --strip-cell-size (computed per strip in JS) */
.strip-cell{
  position: relative;
  width: var(--strip-cell-size, var(--cell-size));
  height: var(--strip-cell-size, var(--cell-size));

  border: var(--inner-border-px) solid var(--inner-border-color);
  border-radius: 10px;

  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 800;
  font-size: calc(var(--strip-cell-size, var(--cell-size)) * 0.42);
  letter-spacing: 0.02em;

  background: var(--white);
  box-sizing: border-box;
}

.section-title{
  font-weight: 900;
  font-size: 13px;
  opacity: 0.75;
  margin-top: 6px;
}

.strip-cell.active-bar{
  background: var(--active-slot);
}

.strip-cell.mark-correct{ background: rgba(223,246,221,0.9); }
.strip-cell.mark-wrong{ background: rgba(255,220,220,0.9); }

.strip-cell.active-bar.mark-correct{ background: rgba(210,242,208,0.95); }
.strip-cell.active-bar.mark-wrong{ background: rgba(255,205,205,0.95); }

.strip-cell.active-cell::after{
  content:"";
  position:absolute;
  inset: 3px;
  border: var(--active-outline-px) solid rgba(0,0,0,0.75);
  border-radius: 8px;
  pointer-events:none;
}

.pool-strip{
  padding-top: 8px;
}

/* Hidden bars stack */
.hidden-wrap{
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.hidden-strip{
  padding-top: 0;
}

.complete{
  margin-top: 6px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(223,246,221,0.9);
  font-weight: 800;
}

.clue-col{
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.clue-title{
  font-weight: 900;
  font-size: 18px;
  margin-bottom: 2px;
}

.clue-hdr{
  font-weight: 800;
  opacity: 0.8;
  margin-top: 8px;
}

.clue{
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 10px 10px;
  border: 1px solid rgba(0,0,0,0.12);
  border-radius: 14px;
  background: rgba(255,255,255,0.92);
  cursor: pointer;
}

.clue:hover{ filter: brightness(0.985); }

.clue.active{
  border-color: rgba(0,0,0,0.28);
  background: rgba(220,235,255,0.95);
}

.clue-tag{
  min-width: 56px;
  font-weight: 900;
  opacity: 0.85;
}

.clue-text{
  opacity: 0.92;
  line-height: 1.25;
}